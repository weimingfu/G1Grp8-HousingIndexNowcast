<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Is NOW the time to BUY?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/housing index.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://isss608-wmfu.shinyapps.io/VAAProject/" rel="" target="">
 <span class="menu-text">Shinyapp</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../userguide/userguide.html" rel="" target="">
 <span class="menu-text">User Guide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../poster/poster.html" rel="" target="">
 <span class="menu-text">Poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../Proposal/proposal.html" rel="" target="" aria-current="page">
 <span class="menu-text">Proposal</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target=""><i class="bi bi-house-door-fill" role="img">
</i> 
 <span class="menu-text">Home</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#housing-price-index-nowcasted" id="toc-housing-price-index-nowcasted" class="nav-link active" data-scroll-target="#housing-price-index-nowcasted"><strong>Housing Price Index “NOWCASTED”</strong></a>
  <ul class="collapse">
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation"><img src="images/motivation-01.png" class="img-fluid" width="45"> <strong>Motivation</strong></a></li>
  <li><a href="#problem" id="toc-problem" class="nav-link" data-scroll-target="#problem"><img src="images/problem-02.png" class="img-fluid" width="45"> <strong>Problem</strong></a></li>
  <li><a href="#current-literature" id="toc-current-literature" class="nav-link" data-scroll-target="#current-literature"><img src="images/literature-01.png" class="img-fluid" width="45"> Current Literature</a></li>
  <li><a href="#our-solution" id="toc-our-solution" class="nav-link" data-scroll-target="#our-solution"><img src="images/solution.png" class="img-fluid" width="45"> <strong>Our Solution</strong></a></li>
  <li><a href="#datasets" id="toc-datasets" class="nav-link" data-scroll-target="#datasets"><img src="images/dataset.png" class="img-fluid" width="45"> <strong>Datasets</strong></a></li>
  <li><a href="#methodology-and-visual-analytics-approach" id="toc-methodology-and-visual-analytics-approach" class="nav-link" data-scroll-target="#methodology-and-visual-analytics-approach"><img src="images/methodology.png" class="img-fluid" width="45"> Methodology and Visual Analytics Approach</a></li>
  <li><a href="#dashboard" id="toc-dashboard" class="nav-link" data-scroll-target="#dashboard"><img src="images/dashboard.png" class="img-fluid" width="45"> <strong>Dashboard</strong></a></li>
  <li><a href="#project-gantt-chart" id="toc-project-gantt-chart" class="nav-link" data-scroll-target="#project-gantt-chart"><img src="images/gantt.png" class="img-fluid" width="45"> Project Gantt Chart</a></li>
  <li><a href="#annex-r-shiny-packages" id="toc-annex-r-shiny-packages" class="nav-link" data-scroll-target="#annex-r-shiny-packages"><strong>Annex: R Shiny Packages</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Is NOW the time to BUY?</h1>
<p class="subtitle lead">Project Proposal on Visual Nowcasting for Property Price Index</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<style type="text/css">
p {   
  text-align: justify
} 
</style>
</div>
<section id="housing-price-index-nowcasted" class="level1">
<h1><strong>Housing Price Index “NOWCASTED”</strong></h1>
<section id="motivation" class="level2" style="color: darkblue">
<h2 style="color: darkblue" class="anchored" data-anchor-id="motivation"><img src="images/motivation-01.png" class="img-fluid" width="45"> <strong>Motivation</strong></h2>
<div style="color: black">
<p>Singapore’s housing market distinguishes itself by operating under a dual-market structure that includes a <a href="https://www.economist.com/asia/2017/07/06/why-80-of-singaporeans-live-in-government-built-flats">public segment developed by the Housing Development Board (HDB)</a>, subject to strict government rules and regulations, and a private segment where market dynamics exclusively dictate prices. Government-regulated HDB flats, which constitute approximately 73% of residential units, accommodate 80% of Singapore’s populace, according to The Economist (2017). The government sets the prices for new HDB apartments, offering them to citizens at subsidized rates. <a href="https://www.bis.org/publ/bppdf/bispap64h.pdf">While the resale prices of HDB apartments are not directly managed, they are significantly shaped by governmental policies, which are periodically modified in response to the country’s macroeconomic challenges</a> (Chan et al., 2012). Despite the smaller scale of the private property sector, our analysis focuses on this segment due to its dynamics being less influenced by governmental control and more by market forces. Our study focuses on accurately and promptly predicting changes in private housing prices, a critical tool for homebuyers, sellers, investors, and policymakers.</p>
</div>
<hr>
</section>
<section id="problem" class="level2" style="color: darkblue">
<h2 style="color: darkblue" class="anchored" data-anchor-id="problem"><img src="images/problem-02.png" class="img-fluid" width="45"> <strong>Problem</strong></h2>
<div style="color: black">
<p>Forecasting Singapore’s private housing index is beset with difficulties, arising from the complex interplay among several factors such as economic indicators, employment trends, policy changes, and current market sentiments. The intricacy is further intensified by the delayed nature of crucial indices and indicators, which are commonly released with a substantial time delay, usually spanning from one to three months. These delays impede the capacity to accurately predict private house price changes, as the most up-to-date data required for precise forecasts is not easily accessible.</p>
<p>To tackle this problem, it is necessary to utlilise nowcasting models that can precisely forecast the future direction of the Singapore private housing market. The objective is to utilize these models to provide stakeholders, including homebuyers, sellers, investors, and policy makers, with timely and convenient access to predictive data via visual analytics.</p>
</div>
<hr>
</section>
<section id="current-literature" class="level2" style="color: darkblue">
<h2 style="color: darkblue" class="anchored" data-anchor-id="current-literature"><img src="images/literature-01.png" class="img-fluid" width="45"> Current Literature</h2>
<div style="color: black">
<p><a href="https://www.nri.com/-/media/Corporate/en/Files/PDF/knowledge/publication/lakyara/2013/06/lakyaravol169.pdf?la=en&amp;hash=9CDEB30C2F6C1222535B0E48647FB6FC04B16552">Taniyama (2013)</a> pioneers the use of real-time data, such as news articles and internet search queries, to forecast real estate market trends. By quantifying market sentiment and public interest obtained from these digital sources, the study presents an innovative approach for analyzing the present state of the housing market, demonstrating that immediate digital footprints might be effective indicators of market dynamics..</p>
<p><a href="https://dr.ntu.edu.sg/handle/10356/61073">Housing Price Prediction Using Neural Networks (2014)</a> research employs artificial neural network (ANN) models to predict public housing prices in Singapore. The study is divided into two sections: the first uses static ANN to estimate selling prices based on housing characteristics, and the second uses dynamic ANN to predict the trend of the resale price index, incorporating nine independent economic and demographic variables.</p>
<p><a href="https://dr.ntu.edu.sg/handle/10356/157358">Housing Price Prediction Using Deep Learning (2022</a>) advances the field by comparing deep learning methods against traditional machine learning algorithms for forecasting the housing resale price index in Singapore. By integrating both historical housing data and macroeconomic indicators, this research evaluates the effectiveness of various models, including Long Short-Term Memory (LSTM), Recurrent Neural Network (RNN), and others, in capturing the complex patterns of price movements, thereby offering a more nuanced understanding of predictive performance in the housing market.</p>
</div>
<hr>
</section>
<section id="our-solution" class="level2" style="color: darkblue">
<h2 style="color: darkblue" class="anchored" data-anchor-id="our-solution"><img src="images/solution.png" class="img-fluid" width="45"> <strong>Our Solution</strong></h2>
<div style="color: black">
<p>Leveraging a variety of R packages and visual analytics techniques, our team intends to construct nowcasting models through an intuitive R Shiny application. This tool is designed to empower stakeholders, providing them with enhanced capabilities to form more informed decisions regarding the future of Singapore’s private housing market.</p>
<p>The application developed by our team will enable users to:</p>
<ol type="a">
<li>Conduct visual analyses of critical time series data, including the housing price index, interest rates, construction raw material prices, and stock market indices, facilitating straightforward comparisons across these varying series.</li>
<li>Grasp the implications of fluctuating factors such as interest rates, stock market indices, and costs of raw materials—variables that shift within the period of calculating the housing price index—and understand their predictive value for the future direction of housing prices.</li>
<li>Develop and display nowcasting models specifically tailored for the housing price index, assessing their precision using established evaluation metrics like the Mean Squared Error (MSE) or the Root Mean Squared Error (RMSE).</li>
</ol>
</div>
<hr>
</section>
<section id="datasets" class="level2" style="color: darkblue">
<h2 style="color: darkblue" class="anchored" data-anchor-id="datasets"><img src="images/dataset.png" class="img-fluid" width="45"> <strong>Datasets</strong></h2>
<div style="color: black; text-align: left">
<p>This study will utilize datasets obtained from official government portals, encompassing a range of economic indicators:</p>
<ul>
<li><strong>Singapore Private Residential Property Price Index</strong>: A quarterly index tracking changes from March 1975 to June 2023.</li>
<li><strong>Singapore Domestic Interest Rates</strong>: The daily SORA Index data spanning from January 1987 to January 2024.</li>
<li><strong>Straits Times Index (STI)</strong>: Daily STI values from April 1985 to January 2024, reflecting stock market trends.</li>
<li><strong>Prices of Raw Materials</strong>: Monthly indices for cement, steel bars, granite, concreting sand, and ready-mixed concrete, providing insight into construction cost dynamics.</li>
<li><strong>Unemployment Rate</strong>: Quarterly data on the percentage of unemployed individuals from March 1992 to December 2023, offering a measure of labor market health.</li>
</ul>
</div>
<hr>
</section>
<section id="methodology-and-visual-analytics-approach" class="level2" style="color: darkblue">
<h2 style="color: darkblue" class="anchored" data-anchor-id="methodology-and-visual-analytics-approach"><img src="images/methodology.png" class="img-fluid" width="45"> Methodology and Visual Analytics Approach</h2>
<div style="color: black; text-align: left">
<section id="exploratory-and-comparative-data-analysis-eda-cda" class="level3">
<h3 class="anchored" data-anchor-id="exploratory-and-comparative-data-analysis-eda-cda"><strong>Exploratory and Comparative Data Analysis (EDA &amp; CDA)</strong></h3>
<ul>
<li>Time series visualizations for a range of indices.</li>
<li>Features enabling users to compare time series of indices within chosen time frames.</li>
<li>Visual representation of statistical summaries for various indices and economic indicators.</li>
</ul>
</section>
<section id="model-development-and-visualization" class="level3">
<h3 class="anchored" data-anchor-id="model-development-and-visualization"><strong>Model Development and Visualization</strong></h3>
<ul>
<li>Deployment of an R Shiny application to facilitate nowcasting with multiple model types for private housing price indices, for instance:
<ul>
<li><strong>Traditional Forecasting Models</strong>: Exponential Smoothing, ARIMA.</li>
<li><strong>Machine Learning Models</strong>: Random Forest, Gradient Boost, Long Short-Term Memory and Prophet.</li>
</ul></li>
<li>Model evaluation using standard metrics like Mean Squared Error (MSE) and Root Mean Squared Error (RMSE), with intuitive visualizations for user-friendly assessment.</li>
<li>Interactive features for parameter adjustment to aid users in finding optimized model settings.</li>
<li>Provision for model comparison functions, contingent on time availability.</li>
</ul>
</section>
</div>
<hr>
</section>
<section id="dashboard" class="level2" style="color: darkblue">
<h2 style="color: darkblue" class="anchored" data-anchor-id="dashboard"><img src="images/dashboard.png" class="img-fluid" width="45"> <strong>Dashboard</strong></h2>
<div style="color: black">
<p>The R Shiny app will feature an interactive dashboard that streamlines the exploration of housing index trends, model forecasts, and essential metrics. This user-centred platform is designed for seamless interaction, ensuring that users can easily access and interpret complex data visualizations.</p>
<p>Schematics of the dashboard are provided below:</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" style="color: black">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Main Dashboard</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Data Analysis (EDA)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Traditional Forecasting Model</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Nowcasting Model</a></li></ul>
<div class="tab-content" style="color: black">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p><img src="images/clipboard-359545664.png" class="img-fluid"></p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><img src="images/clipboard-2091087014.png" class="img-fluid"></p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p><img src="images/clipboard-3682342069.png" class="img-fluid"></p>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p><img src="images/clipboard-303956959.png" class="img-fluid"></p>
</div>
</div>
</div>
<hr>
</section>
<section id="project-gantt-chart" class="level2" style="color: darkblue">
<h2 style="color: darkblue" class="anchored" data-anchor-id="project-gantt-chart"><img src="images/gantt.png" class="img-fluid" width="45"> Project Gantt Chart</h2>
<p><img src="images/clipboard-3468730263.png" class="img-fluid" width="1000"></p>
<hr>
</section>
<section id="annex-r-shiny-packages" class="level2">
<h2 class="anchored" data-anchor-id="annex-r-shiny-packages"><strong>Annex: R Shiny Packages</strong></h2>
<div style="text-align: left">
<p>The list of R Shiny packages (non-exhaustive) are expected to be used in this project:</p>
<ul>
<li><strong>shiny:</strong> The core package for building interactive web applications in R.</li>
<li><strong>shinydashboard:</strong> Provides a framework for creating dashboards with Shiny, allowing you to organize and layout UI elements efficiently.</li>
<li><strong>ggplot2:</strong> For creating elegant and customizable visualizations using the Grammar of Graphics.</li>
<li><strong>plotly:</strong> Adds interactive and dynamic plots to your Shiny app, enabling users to zoom, pan, and hover over data points for additional information.</li>
<li><strong>dplyr:</strong> For data manipulation tasks such as filtering, summarizing, and transforming data frames.</li>
<li><strong>tidyr:</strong> Helps with data tidying tasks such as reshaping data between wide and long formats.</li>
<li><strong>DT:</strong> Enables the integration of interactive and dynamic data tables into your Shiny app, allowing users to sort, filter, and paginate through large datasets.</li>
<li><strong>forecast:</strong> Provides functions for time series forecasting, including methods like ARIMA, exponential smoothing, and dynamic regression models.</li>
<li><strong>xts:</strong> Extensible Time Series (xts) objects facilitate handling time series data, which is essential for modeling and forecasting the housing price index over time.</li>
<li><strong>tidyquant:</strong> Combines the power of tidyverse and quantmod packages, providing seamless integration of financial data analysis and visualization into your Shiny app.</li>
<li><strong>shinythemes:</strong> Offers a variety of pre-built themes and styling options to customize the appearance of your Shiny app.</li>
<li><strong>shinyWidgets:</strong> Provides additional input widgets and UI components to enhance the interactivity and user experience of your Shiny app.</li>
<li><strong>randomForest:</strong> Implements the Random Forest algorithm for classification and regression tasks. It provides efficient and easy-to-use functions for building, tuning, and predicting with random forest models.</li>
<li><strong>gbm:</strong> Implements the Gradient Boosting Machine (GBM) algorithm, which is a popular ensemble learning method. It allows you to build gradient boosting models for regression and classification tasks, with options for tuning parameters and controlling model complexity.</li>
<li><strong>xgboost:</strong> Provides an interface to the XGBoost library, which is an optimized implementation of gradient boosting. XGBoost offers high performance, scalability, and support for advanced features such as regularization and custom objective functions.</li>
<li><strong>keras</strong>: Offers a high-level neural networks API for building deep learning models, including LSTM networks, using TensorFlow as the backend. Keras simplifies the process of constructing and training complex neural architectures with minimal code.</li>
<li><strong>tensorflow</strong>: Provides direct access to the TensorFlow library, which includes functionality for building and training deep learning models, including LSTM networks. TensorFlow offers flexibility, scalability, and support for distributed computing.</li>
<li><strong>prophet</strong>: Provides an interface to use Google’s Prophet forecasting model.</li>
</ul>
</div>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Copyright 2024</div>
  </div>
</footer>



</body></html>